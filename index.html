<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Finely</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --font-size-base: 16px;
        --font-scale: 1;
        --section-scale: 1;
        --primary-color: #007bff;
        --secondary-color: #6c757d;
        --dark-bg: #1a1a2e;
        --dark-accent: #60a5fa;
      }
      body {
        font-family: "Rubik", sans-serif;
        font-size: calc(var(--font-size-base) * var(--font-scale));
        transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        position: relative;
        overflow-x: hidden;
      }
      .container {
        max-width: calc(1000px * var(--section-scale));
        width: 100%;
        padding-left: calc(15px * var(--section-scale));
        padding-right: calc(15px * var(--section-scale));
      }
      .dark-mode {
        background: linear-gradient(
          135deg,
          var(--dark-bg) 0%,
          #16213e 100%
        ) !important;
        color: #ffffff !important;
      }
      .dark-mode .bg-light {
        background: rgba(52, 58, 64, 0.95) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 2px 5px rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .dark-mode .text-dark {
        color: #ffffff !important;
      }
      .dark-mode .table {
        color: #ffffff !important;
      }
      .dark-mode .table-bordered {
        border-color: rgba(255, 255, 255, 0.2) !important;
      }
      .dark-mode .table thead th {
        background: rgba(73, 80, 87, 0.8) !important;
        color: #ffffff !important;
      }
      .dark-mode .card {
        background: rgba(52, 58, 64, 0.95) !important;
        color: #ffffff !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 2px 5px rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transform: scale(var(--section-scale));
      }
      .dark-mode .form-control,
      .dark-mode .form-select {
        background: rgba(73, 80, 87, 0.8) !important;
        color: #ffffff !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
        font-size: calc(var(--font-size-base) * var(--font-scale));
        padding: calc(0.375rem * var(--font-scale))
          calc(0.75rem * var(--font-scale));
      }
      .dark-mode .btn-outline-secondary {
        color: #ffffff !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
      }
      .dark-mode .btn-outline-primary {
        border-color: var(--dark-accent);
        color: var(--dark-accent);
      }
      .dark-mode .btn-outline-primary:hover {
        background-color: rgba(96, 165, 250, 0.1);
      }
      .dark-mode .about-tooltip {
        background-color: #343a40;
        color: #ffffff;
      }
      .dark-mode .footer {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }
      .offcanvas {
        transition: transform 0.3s ease-in-out;
      }
      .btn-primary {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        transition: background-color 0.3s ease;
        font-size: calc(0.45rem * var(--font-scale));
        padding: calc(0.15rem * var(--font-scale))
          calc(0.3rem * var(--font-scale));
        border-radius: 8px;
      }
      .btn-primary.position-fixed {
        font-size: calc(1.5rem * var(--font-scale));
        padding: calc(0.5rem * var(--font-scale));
        width: calc(50px * var(--section-scale));
        height: calc(50px * var(--section-scale));
        border-radius: 50%;
      }
      .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
      }
      .btn-nav {
        color: var(--primary-color);
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 4px;
        padding: calc(0.5rem * var(--font-scale)) calc(1rem * var(--font-scale));
        font-size: calc(1rem * var(--font-scale));
        transition: color 0.3s ease, border-color 0.3s ease;
        margin: calc(0.5rem * var(--section-scale)) 0;
      }
      .btn-nav:hover {
        color: #0056b3;
        border-color: #007bff;
      }
      .btn-nav.active {
        color: #0056b3;
        border-color: #007bff;
      }
      .btn-settings {
        background-color: var(--primary-color);
        color: #ffffff;
        border-radius: 50%;
        width: calc(45px * var(--section-scale));
        height: calc(45px * var(--section-scale));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: calc(1.2rem * var(--font-scale));
        transition: background-color 0.3s ease;
      }
      .btn-settings:hover {
        background-color: #0056b3;
      }
      .btn-success {
        white-space: nowrap;
        padding: calc(0.4rem * var(--font-scale))
          calc(0.8rem * var(--font-scale));
        font-size: calc(0.9rem * var(--font-scale));
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .chart-container {
        display: flex;
        align-items: center;
        justify-content: center;
        max-width: calc(600px * var(--section-scale));
        margin: 0 auto;
        padding: calc(20px * var(--section-scale)) 0;
      }
      .svg-pie-chart {
        width: calc(300px * var(--section-scale));
        height: calc(300px * var(--section-scale));
        flex-shrink: 0;
      }
      .svg-pie-chart path {
        transition: opacity 0.2s ease;
      }
      .svg-pie-chart path:hover {
        opacity: 0.8;
      }
      .legend-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        max-width: calc(200px * var(--section-scale));
        margin-right: calc(20px * var(--section-scale));
      }
      .legend-item {
        display: flex;
        align-items: center;
        margin: calc(8px * var(--section-scale));
        font-size: calc(16px * var(--font-scale));
      }
      .legend-color {
        width: calc(20px * var(--section-scale));
        height: calc(20px * var(--section-scale));
        margin-left: calc(10px * var(--section-scale));
        border-radius: calc(4px * var(--section-scale));
      }
      .background-svg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.2;
      }
      .background-svg path,
      .background-svg circle,
      .background-svg text {
        stroke: var(--primary-color);
        fill: none;
        stroke-width: 2;
        animation: draw 6s infinite alternate;
      }
      .dark-mode .background-svg path,
      .dark-mode .background-svg circle,
      .dark-mode .background-svg text {
        stroke: var(--dark-accent);
      }
      @keyframes draw {
        0% {
          stroke-dashoffset: 100;
        }
        100% {
          stroke-dashoffset: 0;
        }
      }
      h1 {
        font-weight: 700 !important;
        font-size: calc(2.5rem * var(--font-scale));
        background: linear-gradient(135deg, var(--primary-color), #cc5de8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        animation: pulse 2s infinite;
        text-align: center;
        margin-bottom: calc(2rem * var(--section-scale));
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 700 !important;
      }
      .category-summary .d-flex {
        padding: calc(4px * var(--section-scale)) 0;
        margin: 0;
        gap: calc(10px * var(--section-scale));
      }
      .category-summary hr {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        margin: calc(8px * var(--section-scale)) 0;
      }
      .dark-mode .category-summary hr {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }
      .collapse-toggle {
        background: none;
        border: none;
        color: inherit;
        font-size: calc(1.2rem * var(--font-scale));
        transition: transform 0.3s ease;
        width: 100%;
        text-align: end;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .collapse-toggle .bi-chevron-down {
        transition: transform 0.3s ease;
      }
      .collapse-toggle.collapsed .bi-chevron-down {
        transform: rotate(180deg);
      }
      .toast-container {
        position: fixed;
        top: calc(20px * var(--section-scale));
        right: calc(20px * var(--section-scale));
        z-index: 1055;
      }
      .toast {
        background-color: var(--primary-color);
        color: #ffffff;
        border: none;
        font-size: calc(14px * var(--font-scale));
      }
      .dark-mode .toast {
        background-color: var(--dark-accent);
      }
      .toast-header strong {
        ms-auto: auto;
      }
      .card-header {
        cursor: pointer;
      }
      .table th,
      .table td {
        font-size: calc(14px * var(--font-scale));
        padding: calc(8px * var(--section-scale));
      }
      .modal-content {
        transform: scale(var(--section-scale));
      }
      .about-icon {
        position: absolute;
        top: calc(2.5rem * var(--section-scale));
        left: calc(1rem * var(--section-scale));
        font-size: calc(1.5rem * var(--font-scale));
        color: var(--primary-color);
        cursor: pointer;
      }
      .dark-mode .about-icon {
        color: var(--dark-accent);
      }
      .about-tooltip {
        display: none;
        position: absolute;
        top: calc(2.5rem * var(--section-scale));
        left: calc(2rem * var(--section-scale));
        background-color: #f8f9fa;
        color: #212529;
        padding: calc(0.5rem * var(--font-scale));
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        font-size: calc(0.9rem * var(--font-scale));
        max-width: calc(400px * var(--section-scale));
        white-space: normal;
        line-height: 1.5;
        z-index: 1000;
      }
      .about-icon:hover .about-tooltip {
        display: block;
      }
      .footer {
        text-align: center;
        padding: calc(0.5rem * var(--section-scale));
        margin-bottom: 0;
        font-size: calc(0.9rem * var(--font-scale));
        border-top: 1px solid rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body class="bg-light">
    <svg
      class="background-svg"
      viewBox="0 0 1000 1000"
      preserveAspectRatio="xMidYMid slice"
    >
      <path d="M200,300 Q300,200 400,300 T600,300" stroke-dasharray="50,50" />
      <circle cx="300" cy="400" r="20" stroke-dasharray="10,10" />
      <path d="M500,500 Q600,400 700,500 T900,500" stroke-dasharray="30,30" />
      <circle cx="700" cy="600" r="15" stroke-dasharray="5,5" />
      <path
        d="M100,600 L200,700 L300,600 L400,700 L500,600"
        stroke-dasharray="20,20"
      />
      <circle cx="500" cy="300" r="25" stroke-dasharray="15,15" />
      <path
        d="M150,150 L150,250 L200,200 L250,250 L250,150"
        stroke-dasharray="10,10"
      />
      <text
        x="800"
        y="200"
        font-size="40"
        stroke-width="1"
        stroke-dasharray="5,5"
      >
        ‚Ç™
      </text>
      <path d="M750,700 Q800,650 850,700 T950,700" stroke-dasharray="40,40" />
    </svg>
    <div id="root" dir="rtl"></div>
    <script>
      const { useState, useEffect, useRef } = React;

      const FinanceApp = () => {
        const [transactions, setTransactions] = useState([]);
        const [savings, setSavings] = useState([]);
        const [description, setDescription] = useState("");
        const [amount, setAmount] = useState("");
        const [type, setType] = useState("expense");
        const [category, setCategory] = useState("");
        const [filterType, setFilterType] = useState("all");
        const [filterCategory, setFilterCategory] = useState("all");
        const [filterDateStart, setFilterDateStart] = useState("");
        const [filterDateEnd, setFilterDateEnd] = useState("");
        const [darkMode, setDarkMode] = useState(true);
        const [fontSize, setFontSize] = useState("medium"); // Added fontSize state
        const [error, setError] = useState("");
        const [savingsName, setSavingsName] = useState("");
        const [savingsAmount, setSavingsAmount] = useState("");
        const [savingsLocation, setSavingsLocation] = useState("");
        const [savingsError, setSavingsError] = useState("");
        const [activeTab, setActiveTab] = useState("transactions");
        const [editTransaction, setEditTransaction] = useState(null);
        const [editDescription, setEditDescription] = useState("");
        const [editAmount, setEditAmount] = useState("");
        const [editType, setEditType] = useState("expense");
        const [editCategory, setEditCategory] = useState("");
        const [editError, setEditError] = useState("");
        const savingsChartRef = useRef(null);
        const savingsChartInstance = useRef(null);

        const predefinedCategories = [
          "◊û◊ñ◊ï◊ü",
          "◊™◊ó◊ë◊ï◊®◊î",
          "◊ì◊ô◊ï◊®",
          "◊ë◊ô◊ì◊ï◊®",
          "◊ó◊ô◊†◊ï◊ö",
          "◊ë◊®◊ô◊ê◊ï◊™",
          "◊û◊©◊õ◊ï◊®◊™",
          "◊î◊©◊ß◊¢◊ï◊™",
          "◊û◊™◊†◊ï◊™",
          "◊ë◊ô◊í◊ï◊ì",
          "◊†◊°◊ô◊¢◊ï◊™",
          "◊™◊ß◊©◊ï◊®◊™",
          "◊§◊†◊ê◊ô",
          "◊ë◊ô◊ò◊ï◊ó",
          "◊™◊ó◊ñ◊ï◊ß◊î",
          "◊ó◊©◊û◊ú",
          "◊û◊ô◊ù",
        ];
        const predefinedLocations = [
          "◊ë◊†◊ß",
          "◊ß◊®◊ü ◊§◊†◊°◊ô◊î",
          "◊™◊ô◊ß ◊î◊©◊ß◊¢◊ï◊™",
          "◊ó◊©◊ë◊ï◊ü ◊ó◊ô◊°◊õ◊ï◊ü",
          "◊û◊ñ◊ï◊û◊ü",
        ];

        // Load data from localStorage
        useEffect(() => {
          const savedTransactions = JSON.parse(
            localStorage.getItem("transactions") || "[]"
          );
          const savedSavings = JSON.parse(
            localStorage.getItem("savings") || "[]"
          );
          const savedDarkMode = JSON.parse(
            localStorage.getItem("darkMode") || "true"
          );
          const savedFontSize = localStorage.getItem("fontSize") || "medium";
          setTransactions(savedTransactions);
          setSavings(savedSavings);
          setDarkMode(savedDarkMode);
          setFontSize(savedFontSize);
        }, []);

        // Save data to localStorage and apply dark mode and font size
        useEffect(() => {
          localStorage.setItem("transactions", JSON.stringify(transactions));
          localStorage.setItem("savings", JSON.stringify(savings));
          localStorage.setItem("darkMode", JSON.stringify(darkMode));
          localStorage.setItem("fontSize", JSON.stringify(fontSize));
          document.body.className = darkMode ? "bg-dark dark-mode" : "bg-light";
          const root = document.documentElement;
          root.style.setProperty(
            "--font-scale",
            fontSize === "small" ? 0.8 : fontSize === "large" ? 1.2 : 1
          );
          root.style.setProperty(
            "--section-scale",
            fontSize === "small" ? 0.9 : fontSize === "large" ? 1.1 : 1
          );
        }, [transactions, savings, darkMode, fontSize]);

        // Update savings chart
        useEffect(() => {
          if (savingsChartRef.current && window.Chart) {
            const ctx = savingsChartRef.current.getContext("2d");
            const fontScale =
              parseFloat(
                getComputedStyle(document.documentElement).getPropertyValue(
                  "--font-scale"
                )
              ) || 1;
            if (savingsChartInstance.current) {
              savingsChartInstance.current.destroy();
            }
            savingsChartInstance.current = new window.Chart(ctx, {
              type: "line",
              data: {
                labels: savings.map((s) =>
                  new Date(s.date).toLocaleDateString("he-IL")
                ),
                datasets: [
                  {
                    label: "◊°◊ö ◊î◊ó◊°◊õ◊ï◊†◊ï◊™",
                    data: savings.map((s) => s.amount),
                    borderColor: darkMode ? "#60a5fa" : "#007bff",
                    backgroundColor: darkMode
                      ? "rgba(96, 165, 250, 0.2)"
                      : "rgba(0, 123, 255, 0.2)",
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: "#ffffff",
                    pointBorderColor: darkMode ? "#60a5fa" : "#007bff",
                    pointHoverRadius: 8,
                  },
                ],
              },
              options: {
                responsive: true,
                scales: {
                  y: {
                    beginAtZero: true,
                    ticks: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 12 * fontScale },
                    },
                  },
                  x: {
                    ticks: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 12 * fontScale },
                    },
                  },
                },
                plugins: {
                  legend: {
                    labels: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 14 * fontScale },
                    },
                  },
                  tooltip: {
                    backgroundColor: darkMode ? "#343a40" : "#ffffff",
                    titleColor: darkMode ? "#ffffff" : "#212529",
                    bodyColor: darkMode ? "#ffffff" : "#212529",
                  },
                },
              },
            });
          }
        }, [savings, darkMode, fontSize]);

        // Show toast
        const showToast = (message) => {
          const toastContainer = document.getElementById("toastContainer");
          const toastEl = document.createElement("div");
          toastEl.className = "toast";
          toastEl.setAttribute("role", "alert");
          toastEl.setAttribute("aria-live", "assertive");
          toastEl.setAttribute("aria-atomic", "true");
          toastEl.innerHTML = `
          <div class="toast-header">
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="◊°◊í◊ï◊®"></button>
            <strong class="ms-auto">◊î◊ï◊ì◊¢◊î</strong>
          </div>
          <div class="toast-body">${message}</div>
        `;
          toastContainer.appendChild(toastEl);
          const toast = new bootstrap.Toast(toastEl, {
            autohide: true,
            delay: 3000,
          });
          toast.show();
          toastEl.addEventListener("hidden.bs.toast", () => toastEl.remove());
        };

        const addTransaction = (e) => {
          e.preventDefault();
          if (!description.trim()) {
            setError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊™◊ô◊ê◊ï◊®");
            return;
          }
          if (!amount || isNaN(amount) || parseFloat(amount) <= 0) {
            setError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊°◊õ◊ï◊ù ◊ó◊ô◊ï◊ë◊ô");
            return;
          }
          if (!category.trim()) {
            setError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊ß◊ò◊í◊ï◊®◊ô◊î");
            return;
          }

          const newTransaction = {
            id: Date.now(),
            description,
            amount: parseFloat(amount),
            type,
            category,
            date: new Date().toISOString().split("T")[0],
          };

          setTransactions([...transactions, newTransaction]);
          setDescription("");
          setAmount("");
          setCategory("");
          setError("");
          showToast("◊§◊¢◊ï◊ú◊î ◊†◊ï◊°◊§◊î ◊ë◊î◊¶◊ú◊ó◊î");
        };

        const addSavings = (e) => {
          e.preventDefault();
          if (!savingsName.trim()) {
            setSavingsError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊©◊ù ◊ó◊ô◊°◊õ◊ï◊ü");
            return;
          }
          if (
            !savingsAmount ||
            isNaN(savingsAmount) ||
            parseFloat(savingsAmount) < 0
          ) {
            setSavingsError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊°◊õ◊ï◊ù ◊™◊ß◊ô◊ü");
            return;
          }
          if (!savingsLocation.trim()) {
            setSavingsError("◊ó◊ï◊ë◊î ◊ú◊ë◊ó◊ï◊® ◊û◊ô◊ß◊ï◊ù");
            return;
          }

          const newSavings = {
            id: Date.now(),
            name: savingsName,
            amount: parseFloat(savingsAmount),
            location: savingsLocation,
            date: new Date().toISOString().split("T")[0],
          };

          setSavings([...savings, newSavings]);
          setSavingsName("");
          setSavingsAmount("");
          setSavingsLocation("");
          setSavingsError("");
          showToast("◊ó◊ô◊°◊õ◊ï◊ü ◊†◊ï◊°◊£ ◊ë◊î◊¶◊ú◊ó◊î");
        };

        const deleteTransaction = (id) => {
          setTransactions(transactions.filter((t) => t.id !== id));
          showToast("◊§◊¢◊ï◊ú◊î ◊†◊û◊ó◊ß◊î ◊ë◊î◊¶◊ú◊ó◊î");
        };

        const deleteSavings = (id) => {
          setSavings(savings.filter((s) => s.id !== id));
          showToast("◊ó◊ô◊°◊õ◊ï◊ü ◊†◊û◊ó◊ß ◊ë◊î◊¶◊ú◊ó◊î");
        };

        const openEditModal = (transaction) => {
          setEditTransaction(transaction);
          setEditDescription(transaction.description);
          setEditAmount(transaction.amount.toString());
          setEditType(transaction.type);
          setEditCategory(transaction.category);
          setEditError("");
          const modal = new bootstrap.Modal(
            document.getElementById("editTransactionModal")
          );
          modal.show();
        };

        const editTransactionSubmit = (e) => {
          e.preventDefault();
          if (!editDescription.trim()) {
            setEditError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊™◊ô◊ê◊ï◊®");
            return;
          }
          if (!editAmount || isNaN(editAmount) || parseFloat(editAmount) <= 0) {
            setEditError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊°◊õ◊ï◊ù ◊ó◊ô◊ï◊ë◊ô");
            return;
          }
          if (!editCategory.trim()) {
            setEditError("◊ó◊ï◊ë◊î ◊ú◊î◊ñ◊ô◊ü ◊ß◊ò◊í◊ï◊®◊ô◊î");
            return;
          }

          const updatedTransaction = {
            ...editTransaction,
            description: editDescription,
            amount: parseFloat(editAmount),
            type: editType,
            category: editCategory,
          };

          setTransactions(
            transactions.map((t) =>
              t.id === editTransaction.id ? updatedTransaction : t
            )
          );
          setEditTransaction(null);
          setEditDescription("");
          setEditAmount("");
          setEditType("expense");
          setEditCategory("");
          setEditError("");
          showToast("◊§◊¢◊ï◊ú◊î ◊¢◊ï◊ì◊õ◊†◊î ◊ë◊î◊¶◊ú◊ó◊î");
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("editTransactionModal")
          );
          modal.hide();
        };

        const openSettingsModal = () => {
          const modal = new bootstrap.Modal(
            document.getElementById("settingsModal")
          );
          modal.show();
        };

        // Filter transactions
        const filteredTransactions = transactions.filter((t) => {
          const date = new Date(t.date);
          const start = filterDateStart ? new Date(filterDateStart) : null;
          const end = filterDateEnd ? new Date(filterDateEnd) : null;
          return (
            (filterType === "all" || t.type === filterType) &&
            (filterCategory === "all" || t.category === filterCategory) &&
            (!start || date >= start) &&
            (!end || date <= end)
          );
        });

        // Calculate totals
        const totalIncome = filteredTransactions
          .filter((t) => t.type === "income")
          .reduce((sum, t) => sum + t.amount, 0);

        const totalExpenses = filteredTransactions
          .filter((t) => t.type === "expense")
          .reduce((sum, t) => sum + t.amount, 0);

        const balance = totalIncome - totalExpenses;

        // Group by category for summary and pie chart
        const categorySummary = filteredTransactions.reduce((acc, t) => {
          acc[t.category] =
            (acc[t.category] || 0) +
            (t.type === "income" ? t.amount : -t.amount);
          return acc;
        }, {});

        // Custom pie chart data
        const categoryData = predefinedCategories.reduce((acc, cat) => {
          const total = filteredTransactions
            .filter((t) => t.category === cat && t.type === "expense")
            .reduce((sum, t) => sum + t.amount, 0);
          if (total > 0) acc[cat] = total;
          return acc;
        }, {});
        const totalCategoryAmount = Object.values(categoryData).reduce(
          (sum, val) => sum + val,
          0
        );
        const pieChartData = Object.entries(categoryData).map(
          ([category, amount], index) => ({
            category,
            amount,
            color: darkMode
              ? [
                  "#ff6b6b",
                  "#4dabf7",
                  "#51cf66",
                  "#ff922b",
                  "#cc5de8",
                  "#339af0",
                  "#fab005",
                  "#868e96",
                  "#20c997",
                  "#f06595",
                  "#845ef7",
                  "#2b8a3e",
                  "#e03131",
                  "#364fc7",
                  "#f08c00",
                  "#087f5b",
                ][index % 16]
              : [
                  "#007bff",
                  "#6c757d",
                  "#51cf66",
                  "#ff922b",
                  "#cc5de8",
                  "#339af0",
                  "#fab005",
                  "#6c757d",
                  "#20c997",
                  "#f06595",
                  "#845ef7",
                  "#2b8a3e",
                  "#e03131",
                  "#364fc7",
                  "#f08c00",
                  "#087f5b",
                ][index % 16],
          })
        );

        // Generate SVG pie chart
        const generatePieChart = () => {
          if (!totalCategoryAmount) {
            return React.createElement(
              "div",
              { className: "text-center text-muted" },
              "◊ê◊ô◊ü ◊†◊™◊ï◊†◊ô◊ù ◊ú◊î◊¶◊í◊î"
            );
          }
          let startAngle = 0;
          const centerX = 150;
          const centerY = 150;
          const radius = 100;
          const slices = pieChartData.map(({ category, amount, color }) => {
            const percentage = (amount / totalCategoryAmount) * 360;
            const endAngle = startAngle + percentage;
            const largeArc = percentage > 180 ? 1 : 0;
            const startX =
              centerX + radius * Math.cos((startAngle * Math.PI) / 180);
            const startY =
              centerY + radius * Math.sin((startAngle * Math.PI) / 180);
            const endX =
              centerX + radius * Math.cos((endAngle * Math.PI) / 180);
            const endY =
              centerY + radius * Math.sin((endAngle * Math.PI) / 180);
            const path = `M${centerX},${centerY} L${startX},${startY} A${radius},${radius} 0 ${largeArc},1 ${endX},${endY} Z`;
            startAngle = endAngle;
            return React.createElement("path", {
              key: category,
              d: path,
              fill: color,
              onMouseOver: (e) => {
                e.target.setAttribute("opacity", "0.8");
                const tooltip = document.createElement("div");
                tooltip.innerText = `${category}: ${amount.toFixed(2)} ‚Ç™`;
                tooltip.style.position = "absolute";
                tooltip.style.background = darkMode ? "#343a40" : "#ffffff";
                tooltip.style.color = darkMode ? "#ffffff" : "#212529";
                tooltip.style.padding = "5px 10px";
                tooltip.style.borderRadius = "5px";
                tooltip.style.boxShadow = "0 2px 5px rgba(0,0,0,0.2)";
                document.body.appendChild(tooltip);
                tooltip.style.left = `${e.pageX + 10}px`;
                tooltip.style.top = `${e.pageY + 10}px`;
              },
              onMouseOut: (e) => {
                e.target.setAttribute("opacity", "1");
                document
                  .querySelectorAll('div[style*="position: absolute"]')
                  .forEach((el) => el.remove());
              },
            });
          });
          return React.createElement(
            "div",
            { className: "chart-container" },
            React.createElement(
              "svg",
              { className: "svg-pie-chart", viewBox: "0 0 300 300" },
              slices
            ),
            React.createElement(
              "div",
              { className: "legend-container" },
              pieChartData.map(({ category, color }) =>
                React.createElement(
                  "div",
                  { key: category, className: "legend-item" },
                  React.createElement("div", {
                    className: "legend-color",
                    style: { backgroundColor: color },
                  }),
                  React.createElement("span", null, category)
                )
              )
            )
          );
        };

        // Group by month
        const monthlySummary = filteredTransactions.reduce((acc, t) => {
          const date = new Date(t.date);
          if (isNaN(date.getTime())) return acc;
          const month = date.toLocaleString("he-IL", {
            month: "long",
            year: "numeric",
          });
          if (!acc[month]) acc[month] = { income: 0, expenses: 0 };
          if (t.type === "income") acc[month].income += t.amount;
          else acc[month].expenses += t.amount;
          return acc;
        }, {});

        // Calculate savings change
        const totalSavings = savings.reduce((sum, s) => sum + s.amount, 0);
        const previousSavings = savings
          .slice(0, -1)
          .reduce((sum, s) => sum + s.amount, 0);
        const savingsChange =
          savings.length > 1
            ? (
                ((totalSavings - previousSavings) / previousSavings) *
                100
              ).toFixed(2)
            : 0;

        // Export to CSV
        const exportToCSV = () => {
          const headers = "◊™◊ô◊ê◊ï◊®,◊°◊õ◊ï◊ù,◊°◊ï◊í,◊ß◊ò◊í◊ï◊®◊ô◊î,◊™◊ê◊®◊ô◊ö\n";
          const csv =
            headers +
            filteredTransactions
              .map(
                (t) =>
                  `"${t.description}",${t.amount},"${
                    t.type === "expense" ? "◊î◊ï◊¶◊ê◊î" : "◊î◊õ◊†◊°◊î"
                  }","${t.category}","${new Date(t.date).toLocaleDateString(
                    "he-IL"
                  )}"`
              )
              .join("\n");
          const blob = new Blob([new Uint8Array([0xef, 0xbb, 0xbf]), csv], {
            type: "text/csv;charset=utf-8",
          });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = "transactions.csv";
          link.click();
          URL.revokeObjectURL(url);
        };

        return React.createElement(
          "div",
          { className: "container my-4" },
          // Toast Container
          React.createElement("div", {
            id: "toastContainer",
            className: "toast-container",
          }),
          // Edit Transaction Modal
          React.createElement(
            "div",
            {
              className: "modal fade",
              id: "editTransactionModal",
              tabIndex: "-1",
              "aria-labelledby": "editTransactionModalLabel",
              "aria-hidden": "true",
            },
            React.createElement(
              "div",
              { className: "modal-dialog" },
              React.createElement(
                "div",
                { className: "modal-content" },
                React.createElement(
                  "div",
                  { className: "modal-header" },
                  React.createElement(
                    "h5",
                    {
                      className: "modal-title fw-bold",
                      id: "editTransactionModalLabel",
                    },
                    "◊¢◊®◊ô◊õ◊™ ◊§◊¢◊ï◊ú◊î"
                  ),
                  React.createElement("button", {
                    type: "button",
                    className: "btn-close",
                    "data-bs-dismiss": "modal",
                    "aria-label": "◊°◊í◊ï◊®",
                  })
                ),
                React.createElement(
                  "div",
                  { className: "modal-body" },
                  editError &&
                    React.createElement(
                      "p",
                      { className: "text-danger mb-3" },
                      editError
                    ),
                  React.createElement(
                    "div",
                    { className: "row g-3" },
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement("input", {
                        type: "text",
                        placeholder: "◊™◊ô◊ê◊ï◊®",
                        value: editDescription,
                        onChange: (e) => setEditDescription(e.target.value),
                        className: "form-control",
                      })
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement("input", {
                        type: "number",
                        placeholder: "◊°◊õ◊ï◊ù",
                        value: editAmount,
                        onChange: (e) => setEditAmount(e.target.value),
                        className: "form-control",
                      })
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement(
                        "select",
                        {
                          value: editType,
                          onChange: (e) => setEditType(e.target.value),
                          className: "form-select",
                        },
                        React.createElement(
                          "option",
                          { value: "expense" },
                          "◊î◊ï◊¶◊ê◊î"
                        ),
                        React.createElement(
                          "option",
                          { value: "income" },
                          "◊î◊õ◊†◊°◊î"
                        )
                      )
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement(
                        "select",
                        {
                          value: editCategory,
                          onChange: (e) => setEditCategory(e.target.value),
                          className: "form-select",
                        },
                        React.createElement(
                          "option",
                          { value: "" },
                          "◊ë◊ó◊® ◊ß◊ò◊í◊ï◊®◊ô◊î"
                        ),
                        predefinedCategories.map((cat) =>
                          React.createElement(
                            "option",
                            { key: cat, value: cat },
                            cat
                          )
                        )
                      )
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "modal-footer" },
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-outline-secondary",
                      "data-bs-dismiss": "modal",
                    },
                    "◊ë◊ô◊ò◊ï◊ú"
                  ),
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-primary",
                      onClick: editTransactionSubmit,
                    },
                    "◊©◊û◊ï◊® ◊©◊ô◊†◊ï◊ô◊ô◊ù"
                  )
                )
              )
            )
          ),
          // Settings Modal
          React.createElement(
            "div",
            {
              className: "modal fade",
              id: "settingsModal",
              tabIndex: "-1",
              "aria-labelledby": "settingsModalLabel",
              "aria-hidden": "true",
            },
            React.createElement(
              "div",
              { className: "modal-dialog" },
              React.createElement(
                "div",
                { className: "modal-content" },
                React.createElement(
                  "div",
                  { className: "modal-header" },
                  React.createElement(
                    "h5",
                    {
                      className: "modal-title fw-bold",
                      id: "settingsModalLabel",
                    },
                    "◊î◊í◊ì◊®◊ï◊™"
                  ),
                  React.createElement("button", {
                    type: "button",
                    className: "btn-close",
                    "data-bs-dismiss": "modal",
                    "aria-label": "◊°◊í◊ï◊®",
                  })
                ),
                React.createElement(
                  "div",
                  { className: "modal-body" },
                  React.createElement(
                    "div",
                    { className: "mb-3" },
                    React.createElement(
                      "label",
                      { className: "form-label fw-bold" },
                      "◊í◊ï◊ì◊ú ◊ò◊ß◊°◊ò ◊ï◊™◊ï◊õ◊ü"
                    ),
                    React.createElement(
                      "select",
                      {
                        value: fontSize,
                        onChange: (e) => setFontSize(e.target.value),
                        className: "form-select",
                      },
                      React.createElement("option", { value: "small" }, "◊ß◊ò◊ü"),
                      React.createElement(
                        "option",
                        { value: "medium" },
                        "◊ë◊ô◊†◊ï◊†◊ô"
                      ),
                      React.createElement("option", { value: "large" }, "◊í◊ì◊ï◊ú")
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "modal-footer" },
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-outline-secondary",
                      "data-bs-dismiss": "modal",
                    },
                    "◊°◊í◊ï◊®"
                  )
                )
              )
            )
          ),
          // Sidebar Toggle Button
          React.createElement(
            "button",
            {
              className: "btn btn-primary position-fixed top-0 end-0 m-3",
              type: "button",
              "data-bs-toggle": "offcanvas",
              "data-bs-target": "#offcanvasSidebar",
              "aria-controls": "offcanvasSidebar",
            },
            "‚ò∞"
          ),
          // Sidebar
          React.createElement(
            "div",
            {
              className: "offcanvas offcanvas-end bg-light",
              tabIndex: "-1",
              id: "offcanvasSidebar",
              "aria-labelledby": "offcanvasSidebarLabel",
            },
            React.createElement(
              "div",
              { className: "offcanvas-header" },
              React.createElement(
                "h5",
                {
                  className: "offcanvas-title fw-bold",
                  id: "offcanvasSidebarLabel",
                },
                "◊™◊§◊®◊ô◊ò"
              ),
              React.createElement("button", {
                type: "button",
                className: "btn-close",
                "data-bs-dismiss": "offcanvas",
                "aria-label": "◊°◊í◊ï◊®",
              })
            ),
            React.createElement(
              "div",
              { className: "offcanvas-body" },
              React.createElement(
                "nav",
                { className: "nav flex-column gap-3" },
                React.createElement(
                  "a",
                  {
                    className: `nav-link btn-nav ${
                      activeTab === "transactions" ? "active" : ""
                    }`,
                    href: "#",
                    onClick: (e) => {
                      e.preventDefault();
                      setActiveTab("transactions");
                    },
                  },
                  "◊§◊¢◊ï◊ú◊ï◊™"
                ),
                React.createElement(
                  "a",
                  {
                    className: `nav-link btn-nav ${
                      activeTab === "savings" ? "active" : ""
                    }`,
                    href: "#",
                    onClick: (e) => {
                      e.preventDefault();
                      setActiveTab("savings");
                    },
                  },
                  "◊ó◊°◊õ◊ï◊†◊ï◊™"
                ),
                React.createElement(
                  "div",
                  { className: "d-flex justify-content-around mt-auto mb-3" },
                  React.createElement(
                    "button",
                    {
                      className: "btn btn-settings",
                      onClick: openSettingsModal,
                      title: "◊î◊í◊ì◊®◊ï◊™",
                    },
                    React.createElement("i", { className: "bi bi-gear-fill" })
                  ),
                  React.createElement(
                    "button",
                    {
                      className: "btn btn-settings",
                      onClick: () => setDarkMode(!darkMode),
                      title: darkMode ? "◊û◊¶◊ë ◊ô◊ï◊ù" : "◊û◊¶◊ë ◊ú◊ô◊ú◊î",
                    },
                    darkMode ? "‚òÄÔ∏è" : "üåô"
                  )
                )
              )
            )
          ),
          // Main Content
          React.createElement(
            "div",
            { className: "me-3 position-relative" },
            React.createElement(
              "div",
              { className: "about-icon" },
              React.createElement("i", { className: "bi bi-info-square-fill" }),
              React.createElement(
                "div",
                { className: "about-tooltip" },
                "Finely - ◊†◊ô◊î◊ï◊ú ◊§◊ô◊†◊†◊°◊ô ◊ó◊õ◊ù ◊ú◊¢◊ß◊ï◊ë ◊ê◊ó◊® ◊î◊õ◊†◊°◊ï◊™, ◊î◊ï◊¶◊ê◊ï◊™ ◊ï◊ó◊°◊õ◊ï◊†◊ï◊™ ◊¢◊ù ◊û◊û◊©◊ß ◊†◊ï◊ó ◊ï◊í◊®◊§◊ô◊ù ◊ë◊®◊ï◊®◊ô◊ù"
              )
            ),
            React.createElement("h1", { className: "fade-in" }, "Finely"),
            // Transactions Tab
            activeTab === "transactions" &&
              React.createElement(
                "div",
                null,
                // Transaction Form
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#transactionFormCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "transactionFormCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊î◊ï◊°◊§◊™ ◊§◊¢◊ï◊ú◊î"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "transactionFormCollapse",
                    },
                    error &&
                      React.createElement(
                        "p",
                        { className: "text-danger mb-3" },
                        error
                      ),
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "text",
                          placeholder: "◊™◊ô◊ê◊ï◊®",
                          value: description,
                          onChange: (e) => setDescription(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "number",
                          placeholder: "◊°◊õ◊ï◊ù",
                          value: amount,
                          onChange: (e) => setAmount(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: type,
                            onChange: (e) => setType(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "expense" },
                            "◊î◊ï◊¶◊ê◊î"
                          ),
                          React.createElement(
                            "option",
                            { value: "income" },
                            "◊î◊õ◊†◊°◊î"
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: category,
                            onChange: (e) => setCategory(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "" },
                            "◊ë◊ó◊® ◊ß◊ò◊í◊ï◊®◊ô◊î"
                          ),
                          predefinedCategories.map((cat) =>
                            React.createElement(
                              "option",
                              { key: cat, value: cat },
                              cat
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-12" },
                        React.createElement(
                          "button",
                          {
                            onClick: addTransaction,
                            className: "btn btn-primary",
                            style: {
                              width: "50%",
                              fontSize: "1em",
                              display: "block",
                              margin: "0 auto",
                            },
                          },
                          "◊î◊ï◊°◊£ ◊§◊¢◊ï◊ú◊î"
                        )
                      )
                    )
                  )
                ),
                // Filters
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#filtersCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "filtersCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊°◊ô◊†◊ï◊ü ◊§◊¢◊ï◊ú◊ï◊™"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "filtersCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-3" },
                        React.createElement(
                          "select",
                          {
                            value: filterType,
                            onChange: (e) => setFilterType(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "all" },
                            "◊õ◊ú ◊î◊°◊ï◊í◊ô◊ù"
                          ),
                          React.createElement(
                            "option",
                            { value: "expense" },
                            "◊î◊ï◊¶◊ê◊ï◊™"
                          ),
                          React.createElement(
                            "option",
                            { value: "income" },
                            "◊î◊õ◊†◊°◊ï◊™"
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-3" },
                        React.createElement(
                          "select",
                          {
                            value: filterCategory,
                            onChange: (e) => setFilterCategory(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "all" },
                            "◊õ◊ú ◊î◊ß◊ò◊í◊ï◊®◊ô◊ï◊™"
                          ),
                          predefinedCategories.map((cat) =>
                            React.createElement(
                              "option",
                              { key: cat, value: cat },
                              cat
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "div",
                          { className: "row g-3" },
                          React.createElement(
                            "div",
                            { className: "col-md-6" },
                            React.createElement("input", {
                              type: "date",
                              value: filterDateStart,
                              onChange: (e) =>
                                setFilterDateStart(e.target.value),
                              className: "form-control",
                            })
                          ),
                          React.createElement(
                            "div",
                            { className: "col-md-6" },
                            React.createElement("input", {
                              type: "date",
                              value: filterDateEnd,
                              onChange: (e) => setFilterDateEnd(e.target.value),
                              className: "form-control",
                            })
                          )
                        )
                      )
                    )
                  )
                ),
                // Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#summaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "summaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊°◊ô◊õ◊ï◊ù"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "summaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-success text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "◊î◊õ◊†◊°◊ï◊™"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalIncome.toFixed(2) + " ‚Ç™"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-danger text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "◊î◊ï◊¶◊ê◊ï◊™"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalExpenses.toFixed(2) + " ‚Ç™"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-primary text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "◊û◊ê◊ñ◊ü"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              balance.toFixed(2) + " ‚Ç™"
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Transactions Pie Chart
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#pieChartCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "pieChartCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊§◊ô◊ú◊ï◊ó ◊ú◊§◊ô ◊ß◊ò◊í◊ï◊®◊ô◊î"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "pieChartCollapse",
                    },
                    generatePieChart()
                  )
                ),
                // Monthly Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#monthlySummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "monthlySummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊°◊ô◊õ◊ï◊ù ◊ó◊ï◊ì◊©◊ô"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "monthlySummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      Object.entries(monthlySummary).map(([month, data]) =>
                        React.createElement(
                          "div",
                          { key: month, className: "col-md-4" },
                          React.createElement(
                            "div",
                            { className: "card bg-light" },
                            React.createElement(
                              "div",
                              { className: "card-body" },
                              React.createElement(
                                "h3",
                                { className: "card-title h6 fw-bold" },
                                month
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "◊î◊õ◊†◊°◊ï◊™: " + data.income.toFixed(2) + " ‚Ç™"
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "◊î◊ï◊¶◊ê◊ï◊™: " + data.expenses.toFixed(2) + " ‚Ç™"
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "◊û◊ê◊ñ◊ü: " +
                                  (data.income - data.expenses).toFixed(2) +
                                  " ‚Ç™"
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Category Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in category-summary" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#categorySummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "categorySummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊°◊ô◊õ◊ï◊ù ◊ú◊§◊ô ◊ß◊ò◊í◊ï◊®◊ô◊î"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "categorySummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      Object.entries(categorySummary).map(
                        ([cat, amount], index) =>
                          React.createElement(
                            "div",
                            { key: cat, className: "col-md-6" },
                            React.createElement(
                              "div",
                              { className: "d-flex align-items-center" },
                              React.createElement(
                                "span",
                                { className: "fw-bold" },
                                cat
                              ),
                              React.createElement(
                                "span",
                                {
                                  className:
                                    amount >= 0
                                      ? "text-success"
                                      : "text-danger",
                                },
                                amount.toFixed(2) + " ‚Ç™"
                              )
                            ),
                            index < Object.keys(categorySummary).length - 1 &&
                              React.createElement("hr", null)
                          )
                      )
                    )
                  )
                ),
                // Transactions Table
                React.createElement(
                  "div",
                  { className: "card bg-light fade-in" },
                  React.createElement(
                    "div",
                    {
                      className:
                        "card-header d-flex justify-content-between align-items-center",
                    },
                    React.createElement(
                      "button",
                      {
                        className: "collapse-toggle",
                        type: "button",
                        "data-bs-toggle": "collapse",
                        "data-bs-target": "#transactionsTableCollapse",
                        "aria-expanded": "true",
                        "aria-controls": "transactionsTableCollapse",
                      },
                      React.createElement(
                        "h2",
                        { className: "card-title h5 fw-bold mb-0" },
                        "◊®◊©◊ô◊û◊™ ◊§◊¢◊ï◊ú◊ï◊™"
                      ),
                      React.createElement("i", {
                        className: "bi bi-chevron-down",
                      })
                    ),
                    React.createElement(
                      "button",
                      {
                        onClick: exportToCSV,
                        className: "btn btn-success",
                      },
                      "◊ô◊¶◊ï◊ê ◊ú-CSV"
                    )
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "transactionsTableCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "table-responsive" },
                      React.createElement(
                        "table",
                        { className: "table table-bordered" },
                        React.createElement(
                          "thead",
                          null,
                          React.createElement(
                            "tr",
                            null,
                            React.createElement("th", null, "◊™◊ô◊ê◊ï◊®"),
                            React.createElement("th", null, "◊°◊õ◊ï◊ù"),
                            React.createElement("th", null, "◊°◊ï◊í"),
                            React.createElement("th", null, "◊ß◊ò◊í◊ï◊®◊ô◊î"),
                            React.createElement("th", null, "◊™◊ê◊®◊ô◊ö"),
                            React.createElement("th", null, "◊§◊¢◊ï◊ú◊ï◊™")
                          )
                        ),
                        React.createElement(
                          "tbody",
                          null,
                          filteredTransactions.map((t) =>
                            React.createElement(
                              "tr",
                              { key: t.id },
                              React.createElement("td", null, t.description),
                              React.createElement(
                                "td",
                                null,
                                t.amount.toFixed(2) + " ‚Ç™"
                              ),
                              React.createElement(
                                "td",
                                null,
                                t.type === "expense" ? "◊î◊ï◊¶◊ê◊î" : "◊î◊õ◊†◊°◊î"
                              ),
                              React.createElement("td", null, t.category),
                              React.createElement(
                                "td",
                                null,
                                new Date(t.date).toLocaleDateString("he-IL")
                              ),
                              React.createElement(
                                "td",
                                null,
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => openEditModal(t),
                                    className: "btn btn-link text-primary me-2",
                                  },
                                  "◊¢◊®◊ï◊ö"
                                ),
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => deleteTransaction(t.id),
                                    className: "btn btn-link text-danger",
                                  },
                                  "◊û◊ó◊ß"
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              ),
            // Savings Tab
            activeTab === "savings" &&
              React.createElement(
                "div",
                null,
                // Savings Form
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsFormCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsFormCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊î◊ï◊°◊§◊™ ◊ó◊ô◊°◊õ◊ï◊ü"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsFormCollapse",
                    },
                    savingsError &&
                      React.createElement(
                        "p",
                        { className: "text-danger mb-3" },
                        savingsError
                      ),
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "text",
                          placeholder: "◊©◊ù ◊î◊ó◊ô◊°◊õ◊ï◊ü",
                          value: savingsName,
                          onChange: (e) => setSavingsName(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "number",
                          placeholder: "◊°◊õ◊ï◊ù",
                          value: savingsAmount,
                          onChange: (e) => setSavingsAmount(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: savingsLocation,
                            onChange: (e) => setSavingsLocation(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "" },
                            "◊ë◊ó◊® ◊û◊ô◊ß◊ï◊ù"
                          ),
                          predefinedLocations.map((loc) =>
                            React.createElement(
                              "option",
                              { key: loc, value: loc },
                              loc
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-12" },
                        React.createElement(
                          "button",
                          {
                            onClick: addSavings,
                            className: "btn btn-primary w-100",
                          },
                          "◊î◊ï◊°◊£ ◊ó◊ô◊°◊õ◊ï◊ü"
                        )
                      )
                    )
                  )
                ),
                // Savings Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsSummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsSummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊°◊ô◊õ◊ï◊ù ◊ó◊°◊õ◊ï◊†◊ï◊™"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsSummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "div",
                          { className: "card bg-primary text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "◊°◊ö ◊î◊ó◊°◊õ◊ï◊†◊ï◊™"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalSavings.toFixed(2) + " ‚Ç™"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "div",
                          { className: "card bg-success text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "◊©◊ô◊†◊ï◊ô"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              savingsChange >= 0
                                ? `+${savingsChange}%`
                                : `${savingsChange}%`
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Savings Chart
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsChartCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsChartCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊í◊®◊£ ◊ó◊°◊õ◊ï◊†◊ï◊™"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsChartCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "chart-container" },
                      React.createElement("canvas", { ref: savingsChartRef })
                    )
                  )
                ),
                // Savings Table
                React.createElement(
                  "div",
                  { className: "card bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsTableCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsTableCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "◊®◊©◊ô◊û◊™ ◊ó◊°◊õ◊ï◊†◊ï◊™"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsTableCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "table-responsive" },
                      React.createElement(
                        "table",
                        { className: "table table-bordered" },
                        React.createElement(
                          "thead",
                          null,
                          React.createElement(
                            "tr",
                            null,
                            React.createElement("th", null, "◊©◊ù"),
                            React.createElement("th", null, "◊°◊õ◊ï◊ù"),
                            React.createElement("th", null, "◊û◊ô◊ß◊ï◊ù"),
                            React.createElement("th", null, "◊™◊ê◊®◊ô◊ö"),
                            React.createElement("th", null, "◊§◊¢◊ï◊ú◊ï◊™")
                          )
                        ),
                        React.createElement(
                          "tbody",
                          null,
                          savings.map((s) =>
                            React.createElement(
                              "tr",
                              { key: s.id },
                              React.createElement("td", null, s.name),
                              React.createElement(
                                "td",
                                null,
                                s.amount.toFixed(2) + " ‚Ç™"
                              ),
                              React.createElement("td", null, s.location),
                              React.createElement(
                                "td",
                                null,
                                new Date(s.date).toLocaleDateString("he-IL")
                              ),
                              React.createElement(
                                "td",
                                null,
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => deleteSavings(s.id),
                                    className: "btn btn-link text-danger",
                                  },
                                  "◊û◊ó◊ß"
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              ),
            // Footer
            React.createElement(
              "footer",
              { className: "footer mt-4" },
              React.createElement(
                "p",
                null,
                "◊î◊ñ◊õ◊ï◊ô◊ï◊™ ◊©◊û◊ï◊®◊ï◊™ - ◊ò◊ú ◊ô◊¢◊ß◊ë ",
                React.createElement("i", { className: "bi bi-c-circle" })
              )
            )
          )
        );
      };

      ReactDOM.render(
        React.createElement(FinanceApp),
        document.getElementById("root")
      );
    </script>
  </body>
</html>
