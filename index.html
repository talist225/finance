<!DOCTYPE html>
<html lang="he">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>× ×™×”×•×œ ×›×¡×¤×™×</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --font-size-base: 16px;
        --font-scale: 1;
        --section-scale: 1;
      }
      body {
        font-family: "Rubik", sans-serif;
        font-size: calc(var(--font-size-base) * var(--font-scale));
        transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        position: relative;
        overflow-x: hidden;
      }
      .dark-mode {
        background: linear-gradient(
          135deg,
          #1a1a2e 0%,
          #16213e 100%
        ) !important;
        color: #ffffff !important;
      }
      .dark-mode .bg-light {
        background: rgba(52, 58, 64, 0.95) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 2px 5px rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .dark-mode .text-dark {
        color: #ffffff !important;
      }
      .dark-mode .table {
        color: #ffffff !important;
      }
      .dark-mode .table-bordered {
        border-color: rgba(255, 255, 255, 0.2) !important;
      }
      .dark-mode .table thead th {
        background: rgba(73, 80, 87, 0.8) !important;
        color: #ffffff !important;
      }
      .dark-mode .card {
        background: rgba(52, 58, 64, 0.95) !important;
        color: #ffffff !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 2px 5px rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transform: scale(var(--section-scale));
      }
      .dark-mode .form-control,
      .dark-mode .form-select {
        background: rgba(73, 80, 87, 0.8) !important;
        color: #ffffff !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
        font-size: calc(var(--font-size-base) * var(--font-scale));
        padding: calc(0.375rem * var(--font-scale))
          calc(0.75rem * var(--font-scale));
      }
      .dark-mode .btn-outline-secondary {
        color: #ffffff !important;
        border-color: rgba(255, 255, 255, 0.2) !important;
      }
      .dark-mode .offcanvas {
        background: rgba(33, 37, 41, 0.95) !important;
        backdrop-filter: blur(10px);
        color: #ffffff !important;
        border-left: 1px solid rgba(255, 255, 255, 0.2);
      }
      .dark-mode .modal-content {
        background: rgba(52, 58, 64, 0.95) !important;
        color: #ffffff !important;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .offcanvas {
        transition: transform 0.3s ease-in-out;
      }
      .btn-primary {
        background: linear-gradient(135deg, #0d6efd, #6610f2);
        border: none;
        transition: box-shadow 0.3s ease;
        font-size: calc(var(--font-size-base) * var(--font-scale));
        padding: calc(0.375rem * var(--font-scale))
          calc(0.75rem * var(--font-scale));
      }
      .btn-primary:hover {
        box-shadow: 0 0 15px rgba(13, 110, 253, 0.5);
      }
      .btn-outline-primary {
        border-color: #0d6efd;
        color: #0d6efd;
        font-size: calc(var(--font-size-base) * var(--font-scale));
      }
      .dark-mode .btn-outline-primary {
        border-color: #60a5fa;
        color: #60a5fa;
      }
      .dark-mode .btn-outline-primary:hover {
        box-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
      }
      .toggle-btn {
        width: calc(40px * var(--section-scale));
        height: calc(40px * var(--section-scale));
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #0d6efd, #6610f2);
        color: #ffffff;
        font-size: calc(1rem * var(--font-scale));
        transition: box-shadow 0.3s ease;
      }
      .toggle-btn:hover {
        box-shadow: 0 0 15px rgba(13, 110, 253, 0.5);
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .chart-container {
        display: flex;
        align-items: center;
        justify-content: center;
        max-width: calc(600px * var(--section-scale));
        margin: 0 auto;
        padding: calc(20px * var(--section-scale)) 0;
      }
      .svg-pie-chart {
        width: calc(300px * var(--section-scale));
        height: calc(300px * var(--section-scale));
        flex-shrink: 0;
      }
      .svg-pie-chart path {
        transition: opacity 0.2s ease;
      }
      .svg-pie-chart path:hover {
        opacity: 0.8;
      }
      .legend-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        max-width: calc(200px * var(--section-scale));
        margin-right: calc(20px * var(--section-scale));
      }
      .legend-item {
        display: flex;
        align-items: center;
        margin: calc(8px * var(--section-scale));
        font-size: calc(16px * var(--font-scale));
      }
      .legend-color {
        width: calc(20px * var(--section-scale));
        height: calc(20px * var(--section-scale));
        margin-left: calc(10px * var(--section-scale));
        border-radius: calc(4px * var(--section-scale));
      }
      .background-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.5;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 700 !important;
      }
      .category-summary .d-flex {
        padding: calc(4px * var(--section-scale)) 0;
        margin: 0;
        gap: calc(10px * var(--section-scale));
      }
      .category-summary hr {
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        margin: calc(8px * var(--section-scale)) 0;
      }
      .dark-mode .category-summary hr {
        border-top: 1px solid rgba(255, 255, 255, 0.2);
      }
      .collapse-toggle {
        background: none;
        border: none;
        color: inherit;
        font-size: calc(1.2rem * var(--font-scale));
        transition: transform 0.3s ease;
        width: 100%;
        text-align: end;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .collapse-toggle .bi-chevron-down {
        transition: transform 0.3s ease;
      }
      .collapse-toggle.collapsed .bi-chevron-down {
        transform: rotate(180deg);
      }
      .toast-container {
        position: fixed;
        top: calc(20px * var(--section-scale));
        right: calc(20px * var(--section-scale));
        z-index: 1055;
      }
      .toast {
        background: linear-gradient(135deg, #0d6efd, #6610f2);
        color: #ffffff;
        border: none;
        font-size: calc(14px * var(--font-scale));
      }
      .dark-mode .toast {
        background: linear-gradient(135deg, #60a5fa, #cc5de8);
      }
      .toast-header strong {
        ms-auto: auto;
      }
      .card-header {
        cursor: pointer;
      }
      .table th,
      .table td {
        font-size: calc(14px * var(--font-scale));
        padding: calc(8px * var(--section-scale));
      }
      .modal-content {
        transform: scale(var(--section-scale));
      }
    </style>
  </head>
  <body class="bg-light">
    <canvas id="backgroundCanvas" class="background-canvas"></canvas>
    <div id="root" dir="rtl"></div>
    <script>
      // Background Particle Animation
      const canvas = document.getElementById("backgroundCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];
      const colors = ["#60a5fa", "#cc5de8", "#ffffff", "#4dabf7", "#ff922b"];
      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.size = Math.random() * 3 + 1;
          this.speedX = Math.random() * 0.5 - 0.25;
          this.speedY = Math.random() * 0.5 - 0.25;
          this.color = colors[Math.floor(Math.random() * colors.length)];
        }
        update() {
          this.x += this.speedX;
          this.y += this.speedY;
          if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
          if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
        }
        draw() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fill();
        }
      }
      for (let i = 0; i < 50; i++) particles.push(new Particle());
      function animateParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p) => {
          p.update();
          p.draw();
        });
        requestAnimationFrame(animateParticles);
      }
      animateParticles();
      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      const { useState, useEffect, useRef } = React;

      const FinanceApp = () => {
        const [transactions, setTransactions] = useState([]);
        const [savings, setSavings] = useState([]);
        const [description, setDescription] = useState("");
        const [amount, setAmount] = useState("");
        const [type, setType] = useState("expense");
        const [category, setCategory] = useState("");
        const [filterType, setFilterType] = useState("all");
        const [filterCategory, setFilterCategory] = useState("all");
        const [filterDateStart, setFilterDateStart] = useState("");
        const [filterDateEnd, setFilterDateEnd] = useState("");
        const [darkMode, setDarkMode] = useState(true);
        const [error, setError] = useState("");
        const [savingsName, setSavingsName] = useState("");
        const [savingsAmount, setSavingsAmount] = useState("");
        const [savingsLocation, setSavingsLocation] = useState("");
        const [savingsError, setSavingsError] = useState("");
        const [activeTab, setActiveTab] = useState("transactions");
        const [editTransaction, setEditTransaction] = useState(null);
        const [editDescription, setEditDescription] = useState("");
        const [editAmount, setEditAmount] = useState("");
        const [editType, setEditType] = useState("expense");
        const [editCategory, setEditCategory] = useState("");
        const [editError, setEditError] = useState("");
        const [fontSize, setFontSize] = useState("medium");
        const savingsChartRef = useRef(null);
        const savingsChartInstance = useRef(null);

        const predefinedCategories = [
          "××–×•×Ÿ",
          "×ª×—×‘×•×¨×”",
          "×“×™×•×¨",
          "×‘×™×“×•×¨",
          "×—×™× ×•×š",
          "×‘×¨×™××•×ª",
          "××©×›×•×¨×ª",
          "×”×©×§×¢×•×ª",
          "××ª× ×•×ª",
          "×‘×™×’×•×“",
          "× ×¡×™×¢×•×ª",
          "×ª×§×©×•×¨×ª",
          "×¤× ××™",
          "×‘×™×˜×•×—",
          "×ª×—×–×•×§×”",
          "×—×©××œ",
          "××™×",
        ];
        const predefinedLocations = [
          "×‘× ×§",
          "×§×¨×Ÿ ×¤× ×¡×™×”",
          "×ª×™×§ ×”×©×§×¢×•×ª",
          "×—×©×‘×•×Ÿ ×—×™×¡×›×•×Ÿ",
          "××–×•××Ÿ",
        ];

        // Load data from localStorage
        useEffect(() => {
          const savedTransactions = JSON.parse(
            localStorage.getItem("transactions") || "[]"
          );
          const savedSavings = JSON.parse(
            localStorage.getItem("savings") || "[]"
          );
          const savedDarkMode = JSON.parse(
            localStorage.getItem("darkMode") || "true"
          );
          const savedFontSize = localStorage.getItem("fontSize") || "medium";
          setTransactions(savedTransactions);
          setSavings(savedSavings);
          setDarkMode(savedDarkMode);
          setFontSize(savedFontSize);
        }, []);

        // Save data to localStorage and apply dark mode and font size
        useEffect(() => {
          localStorage.setItem("transactions", JSON.stringify(transactions));
          localStorage.setItem("savings", JSON.stringify(savings));
          localStorage.setItem("darkMode", JSON.stringify(darkMode));
          localStorage.setItem("fontSize", fontSize);
          document.body.className = darkMode ? "bg-dark dark-mode" : "bg-light";
          const root = document.documentElement;
          root.style.setProperty(
            "--font-scale",
            fontSize === "small" ? 0.8 : fontSize === "large" ? 1.2 : 1
          );
          root.style.setProperty(
            "--section-scale",
            fontSize === "small" ? 0.9 : fontSize === "large" ? 1.1 : 1
          );
        }, [transactions, savings, darkMode, fontSize]);

        // Update savings chart
        useEffect(() => {
          if (savingsChartRef.current && window.Chart) {
            const ctx = savingsChartRef.current.getContext("2d");
            // Retrieve CSS custom property values
            const fontScale =
              parseFloat(
                getComputedStyle(document.documentElement).getPropertyValue(
                  "--font-scale"
                )
              ) || 1;
            if (savingsChartInstance.current) {
              savingsChartInstance.current.destroy();
            }
            savingsChartInstance.current = new window.Chart(ctx, {
              type: "line",
              data: {
                labels: savings.map((s) =>
                  new Date(s.date).toLocaleDateString("he-IL")
                ),
                datasets: [
                  {
                    label: "×¡×š ×”×—×¡×›×•× ×•×ª",
                    data: savings.map((s) => s.amount),
                    borderColor: darkMode ? "#60a5fa" : "#0d6efd",
                    backgroundColor: darkMode
                      ? "rgba(96, 165, 250, 0.2)"
                      : "rgba(13, 110, 253, 0.2)",
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: "#ffffff",
                    pointBorderColor: darkMode ? "#60a5fa" : "#0d6efd",
                    pointHoverRadius: 8,
                  },
                ],
              },
              options: {
                responsive: true,
                scales: {
                  y: {
                    beginAtZero: true,
                    ticks: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 12 * fontScale },
                    },
                  },
                  x: {
                    ticks: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 12 * fontScale },
                    },
                  },
                },
                plugins: {
                  legend: {
                    labels: {
                      color: darkMode ? "#ffffff" : "#212529",
                      font: { size: 14 * fontScale },
                    },
                  },
                  tooltip: {
                    backgroundColor: darkMode ? "#343a40" : "#ffffff",
                    titleColor: darkMode ? "#ffffff" : "#212529",
                    bodyColor: darkMode ? "#ffffff" : "#212529",
                  },
                },
              },
            });
          }
        }, [savings, darkMode, fontSize]);

        // Show toast
        const showToast = (message) => {
          const toastContainer = document.getElementById("toastContainer");
          const toastEl = document.createElement("div");
          toastEl.className = "toast";
          toastEl.setAttribute("role", "alert");
          toastEl.setAttribute("aria-live", "assertive");
          toastEl.setAttribute("aria-atomic", "true");
          toastEl.innerHTML = `
          <div class="toast-header">
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="×¡×’×•×¨"></button>
            <strong class="ms-auto">×”×•×“×¢×”</strong>
          </div>
          <div class="toast-body">${message}</div>
        `;
          toastContainer.appendChild(toastEl);
          const toast = new bootstrap.Toast(toastEl, {
            autohide: true,
            delay: 3000,
          });
          toast.show();
          toastEl.addEventListener("hidden.bs.toast", () => toastEl.remove());
        };

        const addTransaction = (e) => {
          e.preventDefault();
          if (!description.trim()) {
            setError("×—×•×‘×” ×œ×”×–×™×Ÿ ×ª×™××•×¨");
            return;
          }
          if (!amount || isNaN(amount) || parseFloat(amount) <= 0) {
            setError("×—×•×‘×” ×œ×”×–×™×Ÿ ×¡×›×•× ×—×™×•×‘×™");
            return;
          }
          if (!category.trim()) {
            setError("×—×•×‘×” ×œ×”×–×™×Ÿ ×§×˜×’×•×¨×™×”");
            return;
          }

          const newTransaction = {
            id: Date.now(),
            description,
            amount: parseFloat(amount),
            type,
            category,
            date: new Date().toISOString().split("T")[0],
          };

          setTransactions([...transactions, newTransaction]);
          setDescription("");
          setAmount("");
          setCategory("");
          setError("");
          showToast("×¤×¢×•×œ×” × ×•×¡×¤×” ×‘×”×¦×œ×—×”");
        };

        const addSavings = (e) => {
          e.preventDefault();
          if (!savingsName.trim()) {
            setSavingsError("×—×•×‘×” ×œ×”×–×™×Ÿ ×©× ×—×™×¡×›×•×Ÿ");
            return;
          }
          if (
            !savingsAmount ||
            isNaN(savingsAmount) ||
            parseFloat(savingsAmount) < 0
          ) {
            setSavingsError("×—×•×‘×” ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ");
            return;
          }
          if (!savingsLocation.trim()) {
            setSavingsError("×—×•×‘×” ×œ×‘×—×•×¨ ××™×§×•×");
            return;
          }

          const newSavings = {
            id: Date.now(),
            name: savingsName,
            amount: parseFloat(savingsAmount),
            location: savingsLocation,
            date: new Date().toISOString().split("T")[0],
          };

          setSavings([...savings, newSavings]);
          setSavingsName("");
          setSavingsAmount("");
          setSavingsLocation("");
          setSavingsError("");
          showToast("×—×™×¡×›×•×Ÿ × ×•×¡×£ ×‘×”×¦×œ×—×”");
        };

        const deleteTransaction = (id) => {
          setTransactions(transactions.filter((t) => t.id !== id));
          showToast("×¤×¢×•×œ×” × ××—×§×” ×‘×”×¦×œ×—×”");
        };

        const deleteSavings = (id) => {
          setSavings(savings.filter((s) => s.id !== id));
          showToast("×—×™×¡×›×•×Ÿ × ××—×§ ×‘×”×¦×œ×—×”");
        };

        const openEditModal = (transaction) => {
          setEditTransaction(transaction);
          setEditDescription(transaction.description);
          setEditAmount(transaction.amount.toString());
          setEditType(transaction.type);
          setEditCategory(transaction.category);
          setEditError("");
          const modal = new bootstrap.Modal(
            document.getElementById("editTransactionModal")
          );
          modal.show();
        };

        const editTransactionSubmit = (e) => {
          e.preventDefault();
          if (!editDescription.trim()) {
            setEditError("×—×•×‘×” ×œ×”×–×™×Ÿ ×ª×™××•×¨");
            return;
          }
          if (!editAmount || isNaN(editAmount) || parseFloat(editAmount) <= 0) {
            setEditError("×—×•×‘×” ×œ×”×–×™×Ÿ ×¡×›×•× ×—×™×•×‘×™");
            return;
          }
          if (!editCategory.trim()) {
            setEditError("×—×•×‘×” ×œ×”×–×™×Ÿ ×§×˜×’×•×¨×™×”");
            return;
          }

          const updatedTransaction = {
            ...editTransaction,
            description: editDescription,
            amount: parseFloat(editAmount),
            type: editType,
            category: editCategory,
          };

          setTransactions(
            transactions.map((t) =>
              t.id === editTransaction.id ? updatedTransaction : t
            )
          );
          setEditTransaction(null);
          setEditDescription("");
          setEditAmount("");
          setEditType("expense");
          setEditCategory("");
          setEditError("");
          showToast("×¤×¢×•×œ×” ×¢×•×“×›× ×” ×‘×”×¦×œ×—×”");
          const modal = bootstrap.Modal.getInstance(
            document.getElementById("editTransactionModal")
          );
          modal.hide();
        };

        const openSettingsModal = () => {
          const modal = new bootstrap.Modal(
            document.getElementById("settingsModal")
          );
          modal.show();
        };

        // Filter transactions
        const filteredTransactions = transactions.filter((t) => {
          const date = new Date(t.date);
          const start = filterDateStart ? new Date(filterDateStart) : null;
          const end = filterDateEnd ? new Date(filterDateEnd) : null;
          return (
            (filterType === "all" || t.type === filterType) &&
            (filterCategory === "all" || t.category === filterCategory) &&
            (!start || date >= start) &&
            (!end || date <= end)
          );
        });

        // Calculate totals
        const totalIncome = filteredTransactions
          .filter((t) => t.type === "income")
          .reduce((sum, t) => sum + t.amount, 0);

        const totalExpenses = filteredTransactions
          .filter((t) => t.type === "expense")
          .reduce((sum, t) => sum + t.amount, 0);

        const balance = totalIncome - totalExpenses;

        // Group by category for summary and pie chart
        const categorySummary = filteredTransactions.reduce((acc, t) => {
          acc[t.category] =
            (acc[t.category] || 0) +
            (t.type === "income" ? t.amount : -t.amount);
          return acc;
        }, {});

        // Custom pie chart data
        const categoryData = predefinedCategories.reduce((acc, cat) => {
          const total = filteredTransactions
            .filter((t) => t.category === cat && t.type === "expense")
            .reduce((sum, t) => sum + t.amount, 0);
          if (total > 0) acc[cat] = total;
          return acc;
        }, {});
        const totalCategoryAmount = Object.values(categoryData).reduce(
          (sum, val) => sum + val,
          0
        );
        const pieChartData = Object.entries(categoryData).map(
          ([category, amount], index) => ({
            category,
            amount,
            color: darkMode
              ? [
                  "#ff6b6b",
                  "#4dabf7",
                  "#51cf66",
                  "#ff922b",
                  "#cc5de8",
                  "#339af0",
                  "#fab005",
                  "#868e96",
                  "#20c997",
                  "#f06595",
                  "#845ef7",
                  "#2b8a3e",
                  "#e03131",
                  "#364fc7",
                  "#f08c00",
                  "#087f5b",
                ][index % 16]
              : [
                  "#dc3545",
                  "#0d6efd",
                  "#198754",
                  "#fd7e14",
                  "#6f42c1",
                  "#007bff",
                  "#ffc107",
                  "#6c757d",
                  "#20c997",
                  "#d63384",
                  "#5a3c9f",
                  "#2b8a3e",
                  "#c82333",
                  "#364fc7",
                  "#e07b00",
                  "#087f5b",
                ][index % 16],
          })
        );

        // Generate SVG pie chart
        const generatePieChart = () => {
          if (!totalCategoryAmount) {
            return React.createElement(
              "div",
              { className: "text-center text-muted" },
              "××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”"
            );
          }
          let startAngle = 0;
          const centerX = 150;
          const centerY = 150;
          const radius = 100;
          const slices = pieChartData.map(({ category, amount, color }) => {
            const percentage = (amount / totalCategoryAmount) * 360;
            const endAngle = startAngle + percentage;
            const largeArc = percentage > 180 ? 1 : 0;
            const startX =
              centerX + radius * Math.cos((startAngle * Math.PI) / 180);
            const startY =
              centerY + radius * Math.sin((startAngle * Math.PI) / 180);
            const endX =
              centerX + radius * Math.cos((endAngle * Math.PI) / 180);
            const endY =
              centerY + radius * Math.sin((endAngle * Math.PI) / 180);
            const path = `M${centerX},${centerY} L${startX},${startY} A${radius},${radius} 0 ${largeArc},1 ${endX},${endY} Z`;
            startAngle = endAngle;
            return React.createElement("path", {
              key: category,
              d: path,
              fill: color,
              onMouseOver: (e) => {
                e.target.setAttribute("opacity", "0.8");
                const tooltip = document.createElement("div");
                tooltip.innerText = `${category}: ${amount.toFixed(2)} â‚ª`;
                tooltip.style.position = "absolute";
                tooltip.style.background = darkMode ? "#343a40" : "#ffffff";
                tooltip.style.color = darkMode ? "#ffffff" : "#212529";
                tooltip.style.padding = "5px 10px";
                tooltip.style.borderRadius = "5px";
                tooltip.style.boxShadow = "0 2px 5px rgba(0,0,0,0.2)";
                document.body.appendChild(tooltip);
                tooltip.style.left = `${e.pageX + 10}px`;
                tooltip.style.top = `${e.pageY + 10}px`;
              },
              onMouseOut: (e) => {
                e.target.setAttribute("opacity", "1");
                document
                  .querySelectorAll('div[style*="position: absolute"]')
                  .forEach((el) => el.remove());
              },
            });
          });
          return React.createElement(
            "div",
            { className: "chart-container" },
            React.createElement(
              "svg",
              { className: "svg-pie-chart", viewBox: "0 0 300 300" },
              slices
            ),
            React.createElement(
              "div",
              { className: "legend-container" },
              pieChartData.map(({ category, color }) =>
                React.createElement(
                  "div",
                  { key: category, className: "legend-item" },
                  React.createElement("div", {
                    className: "legend-color",
                    style: { backgroundColor: color },
                  }),
                  React.createElement("span", null, category)
                )
              )
            )
          );
        };

        // Group by month
        const monthlySummary = filteredTransactions.reduce((acc, t) => {
          const date = new Date(t.date);
          if (isNaN(date.getTime())) return acc;
          const month = date.toLocaleString("he-IL", {
            month: "long",
            year: "numeric",
          });
          if (!acc[month]) acc[month] = { income: 0, expenses: 0 };
          if (t.type === "income") acc[month].income += t.amount;
          else acc[month].expenses += t.amount;
          return acc;
        }, {});

        // Calculate savings change
        const totalSavings = savings.reduce((sum, s) => sum + s.amount, 0);
        const previousSavings = savings
          .slice(0, -1)
          .reduce((sum, s) => sum + s.amount, 0);
        const savingsChange =
          savings.length > 1
            ? (
                ((totalSavings - previousSavings) / previousSavings) *
                100
              ).toFixed(2)
            : 0;

        // Export to CSV
        const exportToCSV = () => {
          const headers = "×ª×™××•×¨,×¡×›×•×,×¡×•×’,×§×˜×’×•×¨×™×”,×ª××¨×™×š\n";
          const csv =
            headers +
            filteredTransactions
              .map(
                (t) =>
                  `"${t.description}",${t.amount},"${
                    t.type === "expense" ? "×”×•×¦××”" : "×”×›× ×¡×”"
                  }","${t.category}","${new Date(t.date).toLocaleDateString(
                    "he-IL"
                  )}"`
              )
              .join("\n");
          const blob = new Blob([new Uint8Array([0xef, 0xbb, 0xbf]), csv], {
            type: "text/csv;charset=utf-8",
          });
          const url = URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = "transactions.csv";
          link.click();
          URL.revokeObjectURL(url);
        };

        return React.createElement(
          "div",
          { className: "container my-4" },
          // Toast Container
          React.createElement("div", {
            id: "toastContainer",
            className: "toast-container",
          }),
          // Edit Transaction Modal
          React.createElement(
            "div",
            {
              className: "modal fade",
              id: "editTransactionModal",
              tabIndex: "-1",
              "aria-labelledby": "editTransactionModalLabel",
              "aria-hidden": "true",
            },
            React.createElement(
              "div",
              { className: "modal-dialog" },
              React.createElement(
                "div",
                { className: "modal-content" },
                React.createElement(
                  "div",
                  { className: "modal-header" },
                  React.createElement(
                    "h5",
                    {
                      className: "modal-title fw-bold",
                      id: "editTransactionModalLabel",
                    },
                    "×¢×¨×™×›×ª ×¤×¢×•×œ×”"
                  ),
                  React.createElement("button", {
                    type: "button",
                    className: "btn-close",
                    "data-bs-dismiss": "modal",
                    "aria-label": "×¡×’×•×¨",
                  })
                ),
                React.createElement(
                  "div",
                  { className: "modal-body" },
                  editError &&
                    React.createElement(
                      "p",
                      { className: "text-danger mb-3" },
                      editError
                    ),
                  React.createElement(
                    "div",
                    { className: "row g-3" },
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement("input", {
                        type: "text",
                        placeholder: "×ª×™××•×¨",
                        value: editDescription,
                        onChange: (e) => setEditDescription(e.target.value),
                        className: "form-control",
                      })
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement("input", {
                        type: "number",
                        placeholder: "×¡×›×•×",
                        value: editAmount,
                        onChange: (e) => setEditAmount(e.target.value),
                        className: "form-control",
                      })
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement(
                        "select",
                        {
                          value: editType,
                          onChange: (e) => setEditType(e.target.value),
                          className: "form-select",
                        },
                        React.createElement(
                          "option",
                          { value: "expense" },
                          "×”×•×¦××”"
                        ),
                        React.createElement(
                          "option",
                          { value: "income" },
                          "×”×›× ×¡×”"
                        )
                      )
                    ),
                    React.createElement(
                      "div",
                      { className: "col-md-6" },
                      React.createElement(
                        "select",
                        {
                          value: editCategory,
                          onChange: (e) => setEditCategory(e.target.value),
                          className: "form-select",
                        },
                        React.createElement(
                          "option",
                          { value: "" },
                          "×‘×—×¨ ×§×˜×’×•×¨×™×”"
                        ),
                        predefinedCategories.map((cat) =>
                          React.createElement(
                            "option",
                            { key: cat, value: cat },
                            cat
                          )
                        )
                      )
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "modal-footer" },
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-outline-secondary",
                      "data-bs-dismiss": "modal",
                    },
                    "×‘×™×˜×•×œ"
                  ),
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-primary",
                      onClick: editTransactionSubmit,
                    },
                    "×©××•×¨ ×©×™× ×•×™×™×"
                  )
                )
              )
            )
          ),
          // Settings Modal
          React.createElement(
            "div",
            {
              className: "modal fade",
              id: "settingsModal",
              tabIndex: "-1",
              "aria-labelledby": "settingsModalLabel",
              "aria-hidden": "true",
            },
            React.createElement(
              "div",
              { className: "modal-dialog" },
              React.createElement(
                "div",
                { className: "modal-content" },
                React.createElement(
                  "div",
                  { className: "modal-header" },
                  React.createElement(
                    "h5",
                    {
                      className: "modal-title fw-bold",
                      id: "settingsModalLabel",
                    },
                    "×”×’×“×¨×•×ª"
                  ),
                  React.createElement("button", {
                    type: "button",
                    className: "btn-close",
                    "data-bs-dismiss": "modal",
                    "aria-label": "×¡×’×•×¨",
                  })
                ),
                React.createElement(
                  "div",
                  { className: "modal-body" },
                  React.createElement(
                    "div",
                    { className: "mb-3" },
                    React.createElement(
                      "label",
                      { className: "form-label fw-bold" },
                      "×’×•×“×œ ×˜×§×¡×˜ ×•×ª×•×›×Ÿ"
                    ),
                    React.createElement(
                      "select",
                      {
                        value: fontSize,
                        onChange: (e) => setFontSize(e.target.value),
                        className: "form-select",
                      },
                      React.createElement("option", { value: "small" }, "×§×˜×Ÿ"),
                      React.createElement(
                        "option",
                        { value: "medium" },
                        "×‘×™× ×•× ×™"
                      ),
                      React.createElement("option", { value: "large" }, "×’×“×•×œ")
                    )
                  )
                ),
                React.createElement(
                  "div",
                  { className: "modal-footer" },
                  React.createElement(
                    "button",
                    {
                      type: "button",
                      className: "btn btn-outline-secondary",
                      "data-bs-dismiss": "modal",
                    },
                    "×¡×’×•×¨"
                  )
                )
              )
            )
          ),
          // Sidebar Toggle Button
          React.createElement(
            "button",
            {
              className: "btn btn-primary position-fixed top-0 end-0 m-3",
              type: "button",
              "data-bs-toggle": "offcanvas",
              "data-bs-target": "#offcanvasSidebar",
              "aria-controls": "offcanvasSidebar",
            },
            "â˜°"
          ),
          // Sidebar
          React.createElement(
            "div",
            {
              className: "offcanvas offcanvas-end bg-light",
              tabIndex: "-1",
              id: "offcanvasSidebar",
              "aria-labelledby": "offcanvasSidebarLabel",
            },
            React.createElement(
              "div",
              { className: "offcanvas-header" },
              React.createElement(
                "h5",
                {
                  className: "offcanvas-title fw-bold",
                  id: "offcanvasSidebarLabel",
                },
                "×ª×¤×¨×™×˜"
              ),
              React.createElement("button", {
                type: "button",
                className: "btn-close",
                "data-bs-dismiss": "offcanvas",
                "aria-label": "×¡×’×•×¨",
              })
            ),
            React.createElement(
              "div",
              { className: "offcanvas-body d-flex flex-column gap-3" },
              React.createElement(
                "button",
                {
                  className: `btn ${
                    activeTab === "transactions"
                      ? "btn-primary"
                      : "btn-outline-secondary"
                  }`,
                  onClick: () => setActiveTab("transactions"),
                },
                "×¤×¢×•×œ×•×ª"
              ),
              React.createElement(
                "button",
                {
                  className: `btn ${
                    activeTab === "savings"
                      ? "btn-primary"
                      : "btn-outline-secondary"
                  }`,
                  onClick: () => setActiveTab("savings"),
                },
                "×—×¡×›×•× ×•×ª"
              ),
              React.createElement(
                "button",
                {
                  className: `btn ${
                    activeTab === "settings"
                      ? "btn-primary"
                      : "btn-outline-secondary"
                  }`,
                  onClick: openSettingsModal,
                },
                "×”×’×“×¨×•×ª"
              ),
              React.createElement(
                "div",
                { className: "mt-auto" },
                React.createElement(
                  "button",
                  {
                    className: "toggle-btn",
                    onClick: () => setDarkMode(!darkMode),
                    title: darkMode ? "××¦×‘ ×™×•×" : "××¦×‘ ×œ×™×œ×”",
                  },
                  darkMode ? "â˜€ï¸" : "ğŸŒ™"
                )
              )
            )
          ),
          // Main Content
          React.createElement(
            "div",
            { className: "me-5" },
            React.createElement(
              "h1",
              { className: "text-center mb-4 fw-bold fade-in" },
              "× ×™×”×•×œ ×›×¡×¤×™× ××™×©×™"
            ),
            // Transactions Tab
            activeTab === "transactions" &&
              React.createElement(
                "div",
                null,
                // Transaction Form
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#transactionFormCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "transactionFormCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×”×•×¡×¤×ª ×¤×¢×•×œ×”"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "transactionFormCollapse",
                    },
                    error &&
                      React.createElement(
                        "p",
                        { className: "text-danger mb-3" },
                        error
                      ),
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "text",
                          placeholder: "×ª×™××•×¨",
                          value: description,
                          onChange: (e) => setDescription(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "number",
                          placeholder: "×¡×›×•×",
                          value: amount,
                          onChange: (e) => setAmount(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: type,
                            onChange: (e) => setType(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "expense" },
                            "×”×•×¦××”"
                          ),
                          React.createElement(
                            "option",
                            { value: "income" },
                            "×”×›× ×¡×”"
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: category,
                            onChange: (e) => setCategory(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "" },
                            "×‘×—×¨ ×§×˜×’×•×¨×™×”"
                          ),
                          predefinedCategories.map((cat) =>
                            React.createElement(
                              "option",
                              { key: cat, value: cat },
                              cat
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-12" },
                        React.createElement(
                          "button",
                          {
                            onClick: addTransaction,
                            className: "btn btn-primary w-100",
                          },
                          "×”×•×¡×£ ×¤×¢×•×œ×”"
                        )
                      )
                    )
                  )
                ),
                // Filters
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#filtersCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "filtersCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¡×™× ×•×Ÿ ×¤×¢×•×œ×•×ª"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "filtersCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "select",
                          {
                            value: filterType,
                            onChange: (e) => setFilterType(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "all" },
                            "×›×œ ×”×¡×•×’×™×"
                          ),
                          React.createElement(
                            "option",
                            { value: "expense" },
                            "×”×•×¦××•×ª"
                          ),
                          React.createElement(
                            "option",
                            { value: "income" },
                            "×”×›× ×¡×•×ª"
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "select",
                          {
                            value: filterCategory,
                            onChange: (e) => setFilterCategory(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "all" },
                            "×›×œ ×”×§×˜×’×•×¨×™×•×ª"
                          ),
                          predefinedCategories.map((cat) =>
                            React.createElement(
                              "option",
                              { key: cat, value: cat },
                              cat
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "d-flex gap-3" },
                          React.createElement("input", {
                            type: "date",
                            value: filterDateStart,
                            onChange: (e) => setFilterDateStart(e.target.value),
                            className: "form-control",
                          }),
                          React.createElement("input", {
                            type: "date",
                            value: filterDateEnd,
                            onChange: (e) => setFilterDateEnd(e.target.value),
                            className: "form-control",
                          })
                        )
                      )
                    )
                  )
                ),
                // Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#summaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "summaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¡×™×›×•×"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "summaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-success text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "×”×›× ×¡×•×ª"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalIncome.toFixed(2) + " â‚ª"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-danger text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "×”×•×¦××•×ª"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalExpenses.toFixed(2) + " â‚ª"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-4" },
                        React.createElement(
                          "div",
                          { className: "card bg-primary text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "×××–×Ÿ"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              balance.toFixed(2) + " â‚ª"
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Transactions Pie Chart
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#pieChartCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "pieChartCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¤×™×œ×•×— ×œ×¤×™ ×§×˜×’×•×¨×™×”"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "pieChartCollapse",
                    },
                    generatePieChart()
                  )
                ),
                // Monthly Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#monthlySummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "monthlySummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¡×™×›×•× ×—×•×“×©×™"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "monthlySummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      Object.entries(monthlySummary).map(([month, data]) =>
                        React.createElement(
                          "div",
                          { key: month, className: "col-md-4" },
                          React.createElement(
                            "div",
                            { className: "card bg-light" },
                            React.createElement(
                              "div",
                              { className: "card-body" },
                              React.createElement(
                                "h3",
                                { className: "card-title h6 fw-bold" },
                                month
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "×”×›× ×¡×•×ª: " + data.income.toFixed(2) + " â‚ª"
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "×”×•×¦××•×ª: " + data.expenses.toFixed(2) + " â‚ª"
                              ),
                              React.createElement(
                                "p",
                                { className: "card-text" },
                                "×××–×Ÿ: " +
                                  (data.income - data.expenses).toFixed(2) +
                                  " â‚ª"
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Category Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in category-summary" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#categorySummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "categorySummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¡×™×›×•× ×œ×¤×™ ×§×˜×’×•×¨×™×”"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "categorySummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      Object.entries(categorySummary).map(
                        ([cat, amount], index) =>
                          React.createElement(
                            "div",
                            { key: cat, className: "col-md-6" },
                            React.createElement(
                              "div",
                              { className: "d-flex align-items-center" },
                              React.createElement(
                                "span",
                                { className: "fw-bold" },
                                cat
                              ),
                              React.createElement(
                                "span",
                                {
                                  className:
                                    amount >= 0
                                      ? "text-success"
                                      : "text-danger",
                                },
                                amount.toFixed(2) + " â‚ª"
                              )
                            ),
                            index < Object.keys(categorySummary).length - 1 &&
                              React.createElement("hr", null)
                          )
                      )
                    )
                  )
                ),
                // Transactions Table
                React.createElement(
                  "div",
                  { className: "card bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#transactionsTableCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "transactionsTableCollapse",
                    },
                    React.createElement(
                      "div",
                      {
                        className:
                          "d-flex justify-content-between align-items-center",
                      },
                      React.createElement(
                        "h2",
                        { className: "card-title h5 fw-bold mb-0" },
                        "×¨×©×™××ª ×¤×¢×•×œ×•×ª"
                      ),
                      React.createElement(
                        "button",
                        {
                          onClick: exportToCSV,
                          className: "btn btn-success ms-3",
                        },
                        "×™×¦×•× ×œ-CSV"
                      ),
                      React.createElement("i", {
                        className: "bi bi-chevron-down",
                      })
                    )
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "transactionsTableCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "table-responsive" },
                      React.createElement(
                        "table",
                        { className: "table table-bordered" },
                        React.createElement(
                          "thead",
                          null,
                          React.createElement(
                            "tr",
                            null,
                            React.createElement("th", null, "×ª×™××•×¨"),
                            React.createElement("th", null, "×¡×›×•×"),
                            React.createElement("th", null, "×¡×•×’"),
                            React.createElement("th", null, "×§×˜×’×•×¨×™×”"),
                            React.createElement("th", null, "×ª××¨×™×š"),
                            React.createElement("th", null, "×¤×¢×•×œ×•×ª")
                          )
                        ),
                        React.createElement(
                          "tbody",
                          null,
                          filteredTransactions.map((t) =>
                            React.createElement(
                              "tr",
                              { key: t.id },
                              React.createElement("td", null, t.description),
                              React.createElement(
                                "td",
                                null,
                                t.amount.toFixed(2) + " â‚ª"
                              ),
                              React.createElement(
                                "td",
                                null,
                                t.type === "expense" ? "×”×•×¦××”" : "×”×›× ×¡×”"
                              ),
                              React.createElement("td", null, t.category),
                              React.createElement(
                                "td",
                                null,
                                new Date(t.date).toLocaleDateString("he-IL")
                              ),
                              React.createElement(
                                "td",
                                null,
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => openEditModal(t),
                                    className: "btn btn-link text-primary me-2",
                                  },
                                  "×¢×¨×•×š"
                                ),
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => deleteTransaction(t.id),
                                    className: "btn btn-link text-danger",
                                  },
                                  "××—×§"
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              ),
            // Savings Tab
            activeTab === "savings" &&
              React.createElement(
                "div",
                null,
                // Savings Form
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsFormCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsFormCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×”×•×¡×¤×ª ×—×™×¡×›×•×Ÿ"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsFormCollapse",
                    },
                    savingsError &&
                      React.createElement(
                        "p",
                        { className: "text-danger mb-3" },
                        savingsError
                      ),
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "text",
                          placeholder: "×©× ×”×—×™×¡×›×•×Ÿ",
                          value: savingsName,
                          onChange: (e) => setSavingsName(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement("input", {
                          type: "number",
                          placeholder: "×¡×›×•×",
                          value: savingsAmount,
                          onChange: (e) => setSavingsAmount(e.target.value),
                          className: "form-control",
                        })
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "select",
                          {
                            value: savingsLocation,
                            onChange: (e) => setSavingsLocation(e.target.value),
                            className: "form-select",
                          },
                          React.createElement(
                            "option",
                            { value: "" },
                            "×‘×—×¨ ××™×§×•×"
                          ),
                          predefinedLocations.map((loc) =>
                            React.createElement(
                              "option",
                              { key: loc, value: loc },
                              loc
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-12" },
                        React.createElement(
                          "button",
                          {
                            onClick: addSavings,
                            className: "btn btn-primary w-100",
                          },
                          "×”×•×¡×£ ×—×™×¡×›×•×Ÿ"
                        )
                      )
                    )
                  )
                ),
                // Savings Summary
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsSummaryCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsSummaryCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¡×™×›×•× ×—×¡×›×•× ×•×ª"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsSummaryCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "row g-3" },
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "div",
                          { className: "card bg-primary text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "×¡×š ×”×—×¡×›×•× ×•×ª"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              totalSavings.toFixed(2) + " â‚ª"
                            )
                          )
                        )
                      ),
                      React.createElement(
                        "div",
                        { className: "col-md-6" },
                        React.createElement(
                          "div",
                          { className: "card bg-success text-white" },
                          React.createElement(
                            "div",
                            { className: "card-body" },
                            React.createElement(
                              "h3",
                              { className: "card-title h6 fw-bold" },
                              "×©×™× ×•×™"
                            ),
                            React.createElement(
                              "p",
                              { className: "card-text fs-5" },
                              savingsChange >= 0
                                ? `+${savingsChange}%`
                                : `${savingsChange}%`
                            )
                          )
                        )
                      )
                    )
                  )
                ),
                // Savings Chart
                React.createElement(
                  "div",
                  { className: "card mb-4 bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsChartCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsChartCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×’×¨×£ ×—×¡×›×•× ×•×ª"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsChartCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "chart-container" },
                      React.createElement("canvas", { ref: savingsChartRef })
                    )
                  )
                ),
                // Savings Table
                React.createElement(
                  "div",
                  { className: "card bg-light fade-in" },
                  React.createElement(
                    "button",
                    {
                      className: "card-header collapse-toggle",
                      type: "button",
                      "data-bs-toggle": "collapse",
                      "data-bs-target": "#savingsTableCollapse",
                      "aria-expanded": "true",
                      "aria-controls": "savingsTableCollapse",
                    },
                    React.createElement(
                      "h2",
                      { className: "card-title h5 fw-bold mb-0" },
                      "×¨×©×™××ª ×—×¡×›×•× ×•×ª"
                    ),
                    React.createElement("i", {
                      className: "bi bi-chevron-down",
                    })
                  ),
                  React.createElement(
                    "div",
                    {
                      className: "card-body collapse show",
                      id: "savingsTableCollapse",
                    },
                    React.createElement(
                      "div",
                      { className: "table-responsive" },
                      React.createElement(
                        "table",
                        { className: "table table-bordered" },
                        React.createElement(
                          "thead",
                          null,
                          React.createElement(
                            "tr",
                            null,
                            React.createElement("th", null, "×©×"),
                            React.createElement("th", null, "×¡×›×•×"),
                            React.createElement("th", null, "××™×§×•×"),
                            React.createElement("th", null, "×ª××¨×™×š"),
                            React.createElement("th", null, "×¤×¢×•×œ×•×ª")
                          )
                        ),
                        React.createElement(
                          "tbody",
                          null,
                          savings.map((s) =>
                            React.createElement(
                              "tr",
                              { key: s.id },
                              React.createElement("td", null, s.name),
                              React.createElement(
                                "td",
                                null,
                                s.amount.toFixed(2) + " â‚ª"
                              ),
                              React.createElement("td", null, s.location),
                              React.createElement(
                                "td",
                                null,
                                new Date(s.date).toLocaleDateString("he-IL")
                              ),
                              React.createElement(
                                "td",
                                null,
                                React.createElement(
                                  "button",
                                  {
                                    onClick: () => deleteSavings(s.id),
                                    className: "btn btn-link text-danger",
                                  },
                                  "××—×§"
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
          )
        );
      };

      ReactDOM.render(
        React.createElement(FinanceApp),
        document.getElementById("root")
      );
    </script>
  </body>
</html>
